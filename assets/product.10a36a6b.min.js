import{_ as x}from"./preload-helper.41c905a7.min.js";import{i as r}from"./isNullOrUndefined.f9fb1932.min.js";import{P as B,a as N}from"./PUB_SUB_EVENTS.3b331125.min.js";import{f as z}from"./fetchSections.f98a5208.min.js";import M from"./fetchCartData.48e623df.min.js";import{M as H}from"./MEDIA_BREAKPOINTS.c5fda635.min.js";import{t as q}from"./dataLayer.b9c8aded.min.js";const R=new B,V=N.product,U="static__cart-bubble",$="static__side-cart";(()=>{H.XL_UP.matches&&x(()=>import("./ThumbnailsScrollable.f8b1a6f4.min.js"),["./ThumbnailsScrollable.f8b1a6f4.min.js","./debounce.0da8d65a.min.js"],import.meta.url);const i=document.querySelector(".shopify-product-form");if(r(i))return;const f=i.querySelector("[data-size-select]"),v=i.querySelector("[data-size-width-select]"),w=i.querySelectorAll('[name="color"]'),G=i.querySelectorAll('[name="style"]'),I=i.querySelectorAll("[data-option-select]"),S=i.querySelector("[data-color-title-display]"),_=i.querySelector("[data-variant-input]"),P=i.querySelector("[data-out-of-stock-message]"),a=i.querySelector("[data-submit]"),u=i.querySelector("[data-submit-secondary]"),m=i.querySelector("[data-quantity-input]"),s=document.querySelector("[data-op-add-to-cart]"),A=document.querySelector("[data-size-info-text]"),T=t=>{const e=t.join("|"),o=window.PRODUCT_PAGE_DATA.product.variantsByOptions[e];if(!r(o))return window.PRODUCT_PAGE_DATA.product.variantsByOptions[e];console.log(`Variant not found for selector: ${e}. Will be replaced with first available variant by first option.`);let n=null;for(const c in window.PRODUCT_PAGE_DATA.product.variantsByOptions)if(c.includes(t[0])){console.log(`Found variant for selector: ${c}`),n=window.PRODUCT_PAGE_DATA.product.variantsByOptions[c];break}return r(n)?(console.log(`Variant not found for first option: ${t[0]}. Will be replaced with first available variant.`),window.PRODUCT_PAGE_DATA.product.variantsByOptions[0]):n},L=()=>{const t=document.querySelector(".jsProductPriceSection");t==null||t.classList.add("opacity-50"),z("product__price",`${window.location.href}&`).then(e=>{r(t)||(t.outerHTML=e.product__price,t.classList.remove("opacity-50"))})},E=()=>{var c,p,l;if(r(f))return;const t=(l=(p=(c=window.PRODUCT_PAGE_DATA)==null?void 0:c.optionalProduct)==null?void 0:p.variants)==null?void 0:l[f.value],e=document.querySelector("[data-op-c-variant-size]"),o=document.querySelector("[data-op-price]"),n=document.querySelector("[data-op-variant-id]");r(e)||r(t)||r(o)||r(n)||(e.innerText=t.option1.replaceAll("X","*"),o.innerText=String(t.price),n.dataset.opVariantId=String(t.id))},D=t=>{var n;const e=document.querySelector(".jsProductSlider");if(r(e))return;const o=Number(((n=e.querySelector(`[data-image-id="${t}"]`))==null?void 0:n.dataset.index)??-1);if(o!==-1){if(r(e.swiper)){window.onload=()=>e.swiper.slideTo(o,0,!1);return}e.swiper.slideTo(o,0,!1)}},b=()=>{var o;if(r(A))return;const e=(o=T(y()).metafields)==null?void 0:o.variant_info;if(r(e)){A.hidden=!0;return}A.hidden=!1,A.textContent=e},h=()=>{r(S)||w.forEach(t=>{t.checked&&(S.textContent=t.value)})},y=()=>{const t=[];return r(f)||t.push(f.value),r(v)||t.push(v.value),w.forEach(e=>{e.checked&&t.push(e.value)}),G.forEach(e=>{e.checked&&t.push(e.value)}),I.forEach(e=>{t.push(e.value)}),t},k=()=>{const t=T(y());window.history.replaceState({},"",`${window.location.origin}${window.location.pathname}?variant=${t.id}`),window.PRODUCT_PAGE_DATA.product.currentVariant.id=t.id,window.PRODUCT_PAGE_DATA.product.currentVariant.title=t.title,window.PRODUCT_PAGE_DATA.product.currentVariant.price=String(t.price),!r(_)&&(_.value=t.id.toString(),L(),E(),(()=>{const e=i.querySelector(`[name="style"][value="${t.option2}"]`);r(e)||(e.checked=!0)})(),h(),r(t.featured_media)||D(t.featured_media.id),b(),!(r(a)||r(u))&&(a.disabled=!t.available,u.disabled=!t.available,!r(P)&&P.classList.toggle("hidden",t.available)))},C=(t=!1)=>{var n;if(r(a)||r(_))return;const e=a.textContent;a.disabled=!0,a.textContent="מוסיף לעגלה...";const o=[{id:_.value,quantity:Number((m==null?void 0:m.value)??1)},...!r(s)&&s.checked?[{id:((n=s.dataset)==null?void 0:n.opVariantId)??"",quantity:1,properties:{_parent_variant_id:window.PRODUCT_PAGE_DATA.product.currentVariant.id}}]:[]];M(o,`${U},${$}`).then(c=>{var O;const p=document.querySelector("[data-cart-bubble]"),l=document.querySelector("[data-side-cart-container]");a.textContent="התווסף בהצלחה!",a.disabled=!1,setTimeout(()=>{a.textContent=e},3e3),r(p)||(p.innerHTML=c.sections[U]),r(l)||(l.innerHTML=c.sections[$],(O=l.closest("side-cart"))==null||O.updateInnerEls().open()),t&&(window.location.href="/checkout"),q("add_to_cart",{items:c.items.map(d=>({item_name:d.title,item_id:d.variant_id,price:String(d.final_price),quantity:d.quantity,item_category:d.collection_name,item_variant:d.variant_title,url:d.url}))})}).catch(c=>{console.error(c),a.textContent="Error!",a.disabled=!1})};i.addEventListener("change",t=>{var e;((e=t.target)==null?void 0:e.dataset.variantSelect)!==void 0&&R.notify(V.VARIANT_CHANGE)}),a==null||a.addEventListener("click",t=>{t.preventDefault(),C()}),u==null||u.addEventListener("click",t=>{t.preventDefault(),C(!0)}),s==null||s.addEventListener("change",()=>{const t=s.closest("[data-toggle]");if(!r(t)){if(s.checked){t.classList.remove("border-grey-300"),t.classList.add("border-brand-600");return}t.classList.add("border-grey-300"),t.classList.remove("border-brand-600")}}),R.subscribe(V.VARIANT_CHANGE,k),(()=>{const t=document.querySelector("[data-info-accordion]");r(t)||t.querySelectorAll("read-more").forEach(e=>{e.callback=()=>{const o=e.closest("[data-target]");r(o)||t.openTarget(o.dataset.target??"")}})})(),E(),b(),h();const g=T(y());r(g.featured_media)||D(g.featured_media.id),q("view_item",{items:[{item_name:window.PRODUCT_PAGE_DATA.product.title,url:window.PRODUCT_PAGE_DATA.product.url,item_id:window.PRODUCT_PAGE_DATA.product.id,item_category:window.PRODUCT_PAGE_DATA.product.collections,item_variant:window.PRODUCT_PAGE_DATA.product.currentVariant.title,price:window.PRODUCT_PAGE_DATA.product.currentVariant.price,quantity:1}]})})();
