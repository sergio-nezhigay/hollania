import{_ as $}from"./preload-helper.41c905a7.min.js";import{i as r}from"./isNullOrUndefined.f9fb1932.min.js";import{P as k,a as x}from"./PUB_SUB_EVENTS.3b331125.min.js";import{f as z}from"./fetchSections.f98a5208.min.js";import M from"./fetchCartData.48e623df.min.js";import{M as H}from"./MEDIA_BREAKPOINTS.c5fda635.min.js";import{t as O}from"./dataLayer.b9c8aded.min.js";const q=new k,R=x.product,V="static__cart-bubble",U="static__side-cart";(()=>{H.XL_UP.matches&&$(()=>import("./ThumbnailsScrollable.f8b1a6f4.min.js"),["./ThumbnailsScrollable.f8b1a6f4.min.js","./debounce.0da8d65a.min.js"],import.meta.url);const n=document.querySelector(".shopify-product-form");if(r(n))return;const p=n.querySelector("[data-size-select]"),y=n.querySelector("[data-size-width-select]"),v=n.querySelectorAll('[name="color"]'),G=n.querySelectorAll('[name="style"]'),I=n.querySelectorAll("[data-option-select]"),w=n.querySelector("[data-color-title-display]"),f=n.querySelector("[data-variant-input]"),S=n.querySelector("[data-out-of-stock-message]"),c=n.querySelector("[data-submit]"),l=n.querySelector("[data-submit-secondary]"),A=n.querySelector("[data-quantity-input]"),P=document.querySelectorAll("[data-op-add-to-cart]"),L=document.querySelectorAll("[data-optional-product]"),_=document.querySelector("[data-size-info-text]"),m=t=>{const e=t.join("|"),i=window.PRODUCT_PAGE_DATA.product.variantsByOptions[e];if(!r(i))return window.PRODUCT_PAGE_DATA.product.variantsByOptions[e];console.log(`Variant not found for selector: ${e}. Will be replaced with first available variant by first option.`);let o=null;for(const a in window.PRODUCT_PAGE_DATA.product.variantsByOptions)if(a.includes(t[0])){console.log(`Found variant for selector: ${a}`),o=window.PRODUCT_PAGE_DATA.product.variantsByOptions[a];break}return r(o)?(console.log(`Variant not found for first option: ${t[0]}. Will be replaced with first available variant.`),window.PRODUCT_PAGE_DATA.product.variantsByOptions[0]):o},B=()=>{const t=document.querySelector(".jsProductPriceSection");t==null||t.classList.add("opacity-50"),z("product__price",`${window.location.href}&`).then(e=>{r(t)||(t.outerHTML=e.product__price,t.classList.remove("opacity-50"))})},E=()=>{r(p)||L.forEach(t=>{var d,u,s;const e=t.querySelector("[data-op-c-variant-size]"),i=t.querySelector("[data-op-price]"),o=t.querySelector("[data-op-variant-id]"),a=(s=(u=(d=window.PRODUCT_PAGE_DATA)==null?void 0:d.optionalProducts[t.dataset.optionalProduct??0])==null?void 0:u.variants)==null?void 0:s[p.value];console.log(t.dataset.optionalProduct??0),console.log(a),!(r(e)||r(a)||r(i)||r(o))&&(e.innerText=a.option1.replaceAll("X","*"),i.innerText=String(a.price),o.dataset.opVariantId=String(a.id))})},D=t=>{var o;const e=document.querySelector(".jsProductSlider");if(r(e))return;const i=Number(((o=e.querySelector(`[data-image-id="${t}"]`))==null?void 0:o.dataset.index)??-1);if(i!==-1){if(r(e.swiper)){window.onload=()=>e.swiper.slideTo(i,0,!1);return}e.swiper.slideTo(i,0,!1)}},h=()=>{var i;if(r(_))return;const e=(i=m(T()).metafields)==null?void 0:i.variant_info;if(r(e)){_.hidden=!0;return}_.hidden=!1,_.textContent=e},C=()=>{r(w)||v.forEach(t=>{t.checked&&(w.textContent=t.value)})},T=()=>{const t=[];return r(p)||t.push(p.value),r(y)||t.push(y.value),v.forEach(e=>{e.checked&&t.push(e.value)}),G.forEach(e=>{e.checked&&t.push(e.value)}),I.forEach(e=>{t.push(e.value)}),t},N=()=>{const t=m(T());window.history.replaceState({},"",`${window.location.origin}${window.location.pathname}?variant=${t.id}`),window.PRODUCT_PAGE_DATA.product.currentVariant.id=t.id,window.PRODUCT_PAGE_DATA.product.currentVariant.title=t.title,window.PRODUCT_PAGE_DATA.product.currentVariant.price=String(t.price),!r(f)&&(f.value=t.id.toString(),B(),E(),(()=>{const e=n.querySelector(`[name="style"][value="${t.option2}"]`);r(e)||(e.checked=!0)})(),C(),r(t.featured_media)||D(t.featured_media.id),h(),!(r(c)||r(l))&&(c.disabled=!t.available,l.disabled=!t.available,!r(S)&&S.classList.toggle("hidden",t.available)))},b=(t=!1)=>{if(r(c)||r(f))return;const e=c.textContent;c.disabled=!0,c.textContent="מוסיף לעגלה...";const i=[{id:f.value,quantity:Number((A==null?void 0:A.value)??1)}];P.forEach(o=>{var a;o.checked&&i.push({id:((a=o.dataset)==null?void 0:a.opVariantId)??"",quantity:1,properties:{_parent_variant_id:window.PRODUCT_PAGE_DATA.product.currentVariant.id}})}),M(i,`${V},${U}`).then(o=>{var u;const a=document.querySelector("[data-cart-bubble]"),d=document.querySelector("[data-side-cart-container]");c.textContent="התווסף בהצלחה!",c.disabled=!1,setTimeout(()=>{c.textContent=e},3e3),r(a)||(a.innerHTML=o.sections[V]),r(d)||(d.innerHTML=o.sections[U],(u=d.closest("side-cart"))==null||u.updateInnerEls().open()),t&&(window.location.href="/checkout"),O("add_to_cart",{items:o.items.map(s=>({item_name:s.title,item_id:s.variant_id,price:String(s.final_price),quantity:s.quantity,item_category:s.collection_name,item_variant:s.variant_title,url:s.url}))})}).catch(o=>{console.error(o),c.textContent="Error!",c.disabled=!1})};n.addEventListener("change",t=>{var e;((e=t.target)==null?void 0:e.dataset.variantSelect)!==void 0&&q.notify(R.VARIANT_CHANGE)}),c==null||c.addEventListener("click",t=>{t.preventDefault(),b()}),l==null||l.addEventListener("click",t=>{t.preventDefault(),b(!0)}),P.forEach(t=>{t==null||t.addEventListener("change",()=>{const e=t.closest("[data-toggle]");if(!r(e)){if(t.checked){e.classList.remove("border-grey-300"),e.classList.add("border-brand-600");return}e.classList.add("border-grey-300"),e.classList.remove("border-brand-600")}})}),q.subscribe(R.VARIANT_CHANGE,N),(()=>{const t=document.querySelector("[data-info-accordion]");r(t)||t.querySelectorAll("read-more").forEach(e=>{e.callback=()=>{const i=e.closest("[data-target]");r(i)||t.openTarget(i.dataset.target??"")}})})(),E(),h(),C();const g=m(T());r(g.featured_media)||D(g.featured_media.id),O("view_item",{items:[{item_name:window.PRODUCT_PAGE_DATA.product.title,url:window.PRODUCT_PAGE_DATA.product.url,item_id:window.PRODUCT_PAGE_DATA.product.id,item_category:window.PRODUCT_PAGE_DATA.product.collections,item_variant:window.PRODUCT_PAGE_DATA.product.currentVariant.title,price:window.PRODUCT_PAGE_DATA.product.currentVariant.price,quantity:1}]})})();
