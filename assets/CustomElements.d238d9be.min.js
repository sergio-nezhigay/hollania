import{i as s}from"./isNullOrUndefined.f9fb1932.min.js";import{f as l}from"./fetchSections.f98a5208.min.js";import{t as d}from"./dataLayer.b9c8aded.min.js";class u extends HTMLElement{constructor(){super(...arguments),this.closeOnOutsideClick=!1,this.firstOpened=!s(this.dataset.firstOpened),this.firstOpenedMobile=!s(this.dataset.firstOpenedMobile),this.alwaysOneOpen=!s(this.dataset.alwaysOneOpen),this.accordionModeOff=!s(this.dataset.accordionModeOff),this.$toggles=null,this.$closeAll=null,this.boundFunctions=new Map,this.targets=new Map}connectedCallback(){this.$toggles=this.querySelectorAll("[data-toggle]"),this.$closeAll=this.querySelector("[data-toggle-close-all]"),this.init()}init(){s(this.$toggles)||(this.closeOnOutsideClick=this.dataset.closeOnOutsideClick!==void 0&&this.dataset.closeOnOutsideClick!=="false",this.$toggles.forEach((e,t)=>{const i=e.dataset.toggleFor,n=`[data-target="${i}"]`;if(t===0&&this.firstOpened&&window.matchMedia("(min-width: 768px)").matches&&(e.dataset.toggle="opened"),!s(i)){const a=this.querySelector(n);if(s(a))return;this.targets.set(i,a),e.dataset.toggle==="opened"&&this.openTarget(i)}e.addEventListener("click",a=>{var c;if(!s((c=a.target)==null?void 0:c.closest(n)))return;const o=e.dataset.toggle;if(!(o==="opened"&&this.alwaysOneOpen)){if(o==="opened"){if(this.closeToggle(e),s(i))return;this.closeTarget(i);return}this.accordionModeOff||this.closeAll(),this.openToggle(e),!s(i)&&this.openTarget(i)}})}),s(this.$closeAll)||this.$closeAll.addEventListener("click",()=>{this.closeAll()}))}openToggle(e){if(e.dataset.toggle="opened",!this.closeOnOutsideClick)return;const t=this.bodyClickHandler.bind(this);this.boundFunctions.set(e,t),document.body.addEventListener("click",t)}openTarget(e){const t=this.targets.get(e);s(t)||(t.style.height=s(t.firstElementChild)?"auto":`${t.firstElementChild.scrollHeight}px`)}closeTarget(e){const t=this.targets.get(e);s(t)||(t.style.height="0")}bodyClickHandler(e){if(e.target instanceof HTMLElement){const t=e.target.closest(this.tagName.toLowerCase());if(!s(t)||(e.preventDefault(),this.accordionModeOff))return;this.closeAll()}}closeToggle(e){if(e.dataset.toggle="closed",!this.closeOnOutsideClick)return;const t=this.boundFunctions.get(e);s(t)||(document.body.removeEventListener("click",t),this.boundFunctions.delete(e))}closeAll(){var e;(e=this.$toggles)==null||e.forEach(t=>{t.dataset.toggle="closed",s(t.dataset.toggleFor)||this.closeTarget(t.dataset.toggleFor),this.closeOnOutsideClick&&this.boundFunctions.has(t)&&(document.body.removeEventListener("click",this.boundFunctions.get(t)),this.boundFunctions.delete(t))})}}customElements.define("accordion-component",u);class h extends HTMLElement{constructor(){super(...arguments),this.button=this.querySelector("button[data-play]"),this.video=this.querySelector("video")}connectedCallback(){this.init()}init(){const e=this.video;s(this.button)||s(e)||(e.addEventListener("pause",()=>{var t;(t=this.button)==null||t.style.setProperty("display","block"),e.controls=!1}),this.button.addEventListener("click",()=>{e.play().then(()=>{var t;(t=this.button)==null||t.style.setProperty("display","none"),e.controls=!0})}))}}customElements.define("controlled-video",h);class m extends HTMLElement{constructor(){super(...arguments),this.$button=this.querySelector("[data-copy]"),this.coupon=this.dataset.coupon}connectedCallback(){s(this.$button)||s(this.coupon)||this.$button.addEventListener("click",()=>{navigator.clipboard.writeText(this.coupon??"").then(()=>{this.showAlert()})})}showAlert(){var t,i;const e=document.createElement("div");e.classList.add("absolute-centered-x","top-full","w-max","pt-0.5","text-xs","text-brand-600","text-center"),e.textContent="קופון הועתק, הדביקו אותו בצ'יקאווט",(t=this.$button)==null||t.appendChild(e),(i=this.$button)==null||i.setAttribute("disabled","disabled"),setTimeout(()=>{var n;e.remove(),(n=this.$button)==null||n.removeAttribute("disabled")},3e3)}}customElements.define("banner-coupon",m);class p extends HTMLElement{constructor(){super(...arguments),this.$select=this.querySelector("select"),this.$customSelectPlaceholderSpan=this.querySelector("[data-custom-select-placeholder] span"),this.$customOptions=this.querySelectorAll("[data-option]"),this.boundHandleBodyClick=this.handleBodyClick.bind(this)}connectedCallback(){this.init()}init(){this.addEventListener("click",this.toggle.bind(this)),this.$customOptions.forEach((t,i)=>{t.addEventListener("click",()=>{this.updateActiveItem(i,t.innerText)})});const e=this.closest("form");s(e)||e.addEventListener("reset",()=>{this.updateActiveItem(0,this.$customOptions[0].innerText)})}updateActiveItem(e,t){this.$select.options[e].selected=!0,this.$select.dispatchEvent(new Event("change",{bubbles:!0})),this.$customSelectPlaceholderSpan.textContent=t,this.$customOptions.forEach((i,n)=>{i.dataset.selected=String(n===e)})}open(){this.dataset.closed="false",document.body.addEventListener("click",this.boundHandleBodyClick,!0)}close(){this.dataset.closed="true",document.body.removeEventListener("click",this.boundHandleBodyClick,!0)}toggle(){this.dataset.closed==="true"?this.open():this.close()}handleBodyClick(e){const t=e.target;s(t.closest(this.tagName))&&this.close()}}customElements.define("custom-select",p);class b extends HTMLElement{constructor(){super(...arguments),this.input=this.querySelector("input[type=number]"),this.minusButton=this.querySelector("[data-decrease]"),this.plusButton=this.querySelector("[data-increase]"),this.min=Number(this.getAttribute("data-min")??0),this.max=Number(this.getAttribute("data-max")??1/0),this.decrease=e=>{e.preventDefault();const t=Number(this.input.value);t>this.min&&(this.input.value=String(t-1))},this.increase=e=>{e.preventDefault();const t=Number(this.input.value);t<this.max&&(this.input.value=String(t+1))}}connectedCallback(){this.minusButton.addEventListener("click",this.decrease),this.plusButton.addEventListener("click",this.increase)}}customElements.define("custom-number-input",b);class y extends HTMLElement{constructor(){super(...arguments),this.$scButton=this.querySelector("[data-cart-btn]"),this.$scCartContainer=this.querySelector("[data-side-cart-container]"),this.$scCloseButton=this.querySelector("[data-close-cart]"),this.$overlay=this.querySelector("[data-cart-overlay]"),this.$cartBubble=this.querySelector("[data-cart-bubble]"),this.$scDisabler=null,this.boundClose=this.close.bind(this)}connectedCallback(){document.body.classList.contains("sl-cart-body")||this.update().then(()=>{this.init(),this.initListeners()})}init(){var e,t;(e=this.$scButton)==null||e.addEventListener("click",this.open.bind(this)),(t=this.$scCloseButton)==null||t.addEventListener("click",this.close.bind(this)),this.updateInnerEls()}updateInnerEls(){return this.$scDisabler=this.querySelector("[data-side-cart-disabler]"),this}initListeners(){var e;(e=this.$scCartContainer)==null||e.addEventListener("click",t=>{const i=t.target,n=i.closest("[data-remove-cart-item]"),a=i.closest("[data-side-cart-quantity-control]");s(n)||this.removeItem(n.dataset.removeCartItem),s(a)||this.handleQuantityButtons(a)})}async handleQuantityButtons(e){var n,a;const t=(a=(n=e.closest("[data-side-cart-quantity-control]"))==null?void 0:n.parentElement)==null?void 0:a.querySelector("[data-side-cart-quantity-input]");if(s(t))return;let i=parseInt(t.value);e.dataset.sideCartQuantityControl==="increase"?i++:i=i===1?1:i-1,t.value=i.toString(),!s(t.dataset.sideCartQuantityInput)&&(s(this.$scDisabler)||this.$scDisabler.classList.remove("hidden"),await this.updateItemQuantity(i,t.dataset.sideCartQuantityInput),await this.update(),setTimeout(()=>{s(this.$scDisabler)||this.$scDisabler.classList.add("hidden")},1e3))}async updateItemQuantity(e,t){try{const i=await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,quantity:e})});i.ok||console.error(i.statusText)}catch(i){console.error(i)}}open(){document.body.classList.add("overflow-hidden"),!s(this.$scCartContainer)&&(this.$scCartContainer.classList.remove("sc-hidden"),fetch(window.Shopify.routes.root+"cart.js").then(e=>e.json()).then(e=>{d("view_cart",{items:e.items.map(t=>({item_name:t.title,url:t.url,item_id:t.variant_id,item_price:String(t.original_price),discount:String(t.line_level_total_discount),item_category:t.collection_name,item_variant:t.variant_title,item_list_name:"Side Cart",quantity:t.quantity})),total_items:e.item_count,total_price:e.total_price,currency:e.currency})}),!s(this.$overlay)&&(this.$overlay.classList.remove("overlay-hidden"),this.$overlay.addEventListener("click",this.boundClose)))}close(){document.body.classList.remove("overflow-hidden"),!s(this.$scCartContainer)&&(this.$scCartContainer.classList.add("sc-hidden"),!s(this.$overlay)&&(this.$overlay.classList.add("overlay-hidden"),this.$overlay.removeEventListener("click",this.boundClose)))}async removeItem(e){if(!s(e)){s(this.$scDisabler)||this.$scDisabler.classList.remove("hidden");try{const t=await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:0})});t.ok||console.error(t.statusText),await this.update(),setTimeout(()=>{s(this.$scDisabler)||this.$scDisabler.classList.add("hidden")},1e3)}catch(t){console.error(t)}}}async update(){await l("static__cart-bubble,static__side-cart").then(e=>{s(this.$cartBubble)||(this.$cartBubble.innerHTML=e["static__cart-bubble"]),s(this.$scCartContainer)||(this.$scCartContainer.innerHTML=e["static__side-cart"])}),this.updateInnerEls()}}customElements.define("side-cart",y);class f extends HTMLElement{constructor(){super(...arguments),this.$cartContainer=this.querySelector("[data-cart-container]"),this.$cartBubble=document.querySelector("[data-cart-bubble]"),this.$cartDisabler=null}connectedCallback(){this.update().then(()=>{this.updateInnerEls(),this.initListeners()})}updateInnerEls(){this.$cartDisabler=this.querySelector("[data-cart-disabler]")}initListeners(){var e;(e=this.$cartContainer)==null||e.addEventListener("click",t=>{const i=t.target,n=i.closest("[data-remove-cart-item]"),a=i.closest("[data-cart-quantity-control]");s(n)||this.removeItem(n.dataset.removeCartItem),s(a)||this.handleQuantityButtons(a)})}async handleQuantityButtons(e){var n,a;const t=(a=(n=e.closest("[data-cart-quantity-control]"))==null?void 0:n.parentElement)==null?void 0:a.querySelector("[data-cart-quantity-input]");if(s(t))return;let i=parseInt(t.value);e.dataset.cartQuantityControl==="increase"?i++:i=i===1?1:i-1,t.value=i.toString(),!s(t.dataset.cartQuantityInput)&&(s(this.$cartDisabler)||this.$cartDisabler.classList.remove("hidden"),await this.updateItemQuantity(i,t.dataset.cartQuantityInput),await this.update(),setTimeout(()=>{s(this.$cartDisabler)||this.$cartDisabler.classList.add("hidden")},1e3))}async updateItemQuantity(e,t){try{const i=await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,quantity:e})});i.ok||console.error(i.statusText)}catch(i){console.error(i)}}async removeItem(e){if(!s(e)){s(this.$cartDisabler)||this.$cartDisabler.classList.remove("hidden");try{const t=await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:0})});t.ok||console.error(t.statusText),await this.update(),setTimeout(()=>{s(this.$cartDisabler)||this.$cartDisabler.classList.add("hidden")},1e3)}catch(t){console.error(t)}}}async update(){await l("static__cart-bubble,cart__main").then(e=>{var t;if(s(this.$cartBubble)||(this.$cartBubble.innerHTML=e["static__cart-bubble"]),!s(this.$cartContainer)){const i=document.createElement("div");i.innerHTML=e.cart__main,this.$cartContainer.innerHTML=((t=i==null?void 0:i.querySelector("[data-cart-container]"))==null?void 0:t.innerHTML)??""}}),this.updateInnerEls()}}customElements.define("cart-page",f);class g extends HTMLElement{constructor(){super(...arguments),this.$text=this.querySelector("[data-read]")}connectedCallback(){this.$text=this.querySelector("[data-read]"),this.init()}init(){s(this.$text)||this.$text.addEventListener("click",()=>{this.toggleRead()})}toggleRead(){s(this.$text)||(this.$text.dataset.read=this.$text.dataset.read==="less"?"more":"less",!s(this.callback)&&this.callback())}}customElements.define("read-more",g);
