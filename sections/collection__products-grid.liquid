{{ 'collection-products-grid.css' | asset_url | stylesheet_tag }}
{{ 'custom-image.css' | asset_url | stylesheet_tag }}
<div>
  <!-- Filter Tabs -->
  <div class="filter-tabs">
    <div class="container">
      <div class="tabs-wrapper">
        <button class="tab-button active" data-filter="all">הכל</button>
        <button class="tab-button" data-filter="modern">מודרני</button>
        <button class="tab-button" data-filter="classic">קלאסי</button>
        <button class="tab-button" data-filter="luxury">יוקרתי</button>
        <button class="tab-button" data-filter="sale">במבצע</button>
      </div>
    </div>
  </div>

  <!-- Products Grid -->
  <div class="products-section">
    <div class="container">
      {% assign index = 0 %}
      <div class="products-grid">
        <!-- to debug -->
        {% for i in (1..3) %}
          {% for product in collection.products %}
            {% assign index = index | plus: 1 %}
            {% render 'product-card', product: product %}

            {% if index == 3 %}
              <div class="banner banner-mobile">
                {% render 'custom-image' %}
                {% comment %}remove old banner fromsection{% endcomment %}
              </div>
            {% endif %}

            {% if index == 6 %}
              <div class="banner banner-desktop">
                {% render 'custom-image' %}
              </div>
            {% endif %}
          {% endfor %}
        {% endfor %}
      </div>
    </div>
  </div>

  <!-- Load More Button -->
  <div class="load-more-section">
    <div class="container">
      <button class="load-more-btn">טען עוד מוצרים</button>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Filter functionality
    const filterButtons = document.querySelectorAll('.tab-button');
    const productCards = document.querySelectorAll('.product-card');

    filterButtons.forEach((button) => {
      button.addEventListener('click', function () {
        const filter = this.dataset.filter;

        // Update active button
        filterButtons.forEach((btn) => btn.classList.remove('active'));
        this.classList.add('active');

        // Filter products
        productCards.forEach((card) => {
          if (filter === 'all') {
            card.style.display = 'block';
          } else {
            const category = card.dataset.category;
            if (category && category.includes(filter)) {
              card.style.display = 'block';
            } else {
              card.style.display = 'none';
            }
          }
        });
      });
    });

    // Load more functionality
    const loadMoreBtn = document.querySelector('.load-more-btn');
    if (loadMoreBtn) {
      loadMoreBtn.addEventListener('click', function () {
        // Add your load more logic here
        // This could involve AJAX calls to load more products
        console.log('Load more products');
      });
    }

    // Quick view functionality
    const quickViewBtns = document.querySelectorAll('.quick-view-btn');
    quickViewBtns.forEach((btn) => {
      btn.addEventListener('click', function (e) {
        e.preventDefault();
        e.stopPropagation();
        // Add your quick view modal logic here
        console.log('Quick view clicked');
      });
    });

    // Add to cart functionality
    const addToCartBtns = document.querySelectorAll('.add-to-cart-btn');
    addToCartBtns.forEach((btn) => {
      btn.addEventListener('click', function (e) {
        e.preventDefault();
        e.stopPropagation();
        // Add your add to cart logic here
        console.log('Add to cart clicked');
      });
    });
  });
</script>

{% schema %}
{
  "name": "Custom Image Picker",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Select Image"
    },
    {
      "type": "url",
      "id": "image_url",
      "label": "Image Link URL",
      "info": "Add a URL to make the image clickable"
    }
  ],
  "presets": [
    {
      "name": "Baner"
    }
  ]
}
{% endschema %}
